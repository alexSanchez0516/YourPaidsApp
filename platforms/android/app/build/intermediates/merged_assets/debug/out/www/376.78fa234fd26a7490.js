"use strict";(self.webpackChunkgestorEconomy=self.webpackChunkgestorEconomy||[]).push([[376],{7376:(j,Z,a)=>{a.r(Z),a.d(Z,{AuthModule:()=>z});var d=a(6895),m=a(9299),n=a(4006),C=a(8177),g=a(9392),e=a(4650),f=a(7392),R=a(6518),y=a(1481),h=a(9101),c=a(9549),T=a(4144),p=a(1576),v=a(6134);function _(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Por favor, introduce un email v\xe1lido "),e.qZA())}function x(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Por favor, la contrase\xf1a debe tener m\xednimo 6 caracteres "),e.qZA())}function b(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"swal",9),e.NdJ("didClose",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.isCredentialError=!1)}),e.qZA()}2&t&&e.Q6J("swalFireOnInit",!0)}let F=(()=>{class t{constructor(r,o,s,u,l){this.fb=r,this.matIconRegistry=o,this.router=s,this.authService=u,this.domSanitizer=l,this.loginForm=this.fb.group({email:["",[n.kI.required,n.kI.pattern(g.s9)],[]],password:["",[n.kI.required,n.kI.minLength(6),n.kI.pattern(g.MP)],[]]}),this.hide=!0,this.matcher=new C.n,this.isCredentialError=!1,this.matIconRegistry.addSvgIcon("logo",this.domSanitizer.bypassSecurityTrustResourceUrl("https://raw.githubusercontent.com/fireflysemantics/logo/master/Google.svg"))}signInWithGoogle(){}signOut(){}refreshToken(){}campoIsInvalid(r){return this.loginForm.get(r)?.errors}ngOnInit(){""!=localStorage.getItem("token")&&this.router.navigateByUrl("app/inicio").then()}login(){if(this.loginForm.valid){const r={...this.loginForm.value};this.authService.login(r).subscribe({next:o=>{o?this.router.navigateByUrl("app/inicio").then():this.isCredentialError=!0},error:o=>{console.log("error: ",o)}})}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(n.qu),e.Y36(f.jv),e.Y36(m.F0),e.Y36(R.e),e.Y36(y.H7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:20,vars:8,consts:[[2,"margin-top","3rem"],["fxLayout","column wrap","fxLayoutGap","1.5rem",3,"formGroup","ngSubmit"],["matInput","","formControlName","email"],[4,"ngIf"],["formControlName","password","matInput","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["fxLayout","column","fxLayoutGap","1rem"],["mat-button","","mat-raised-button","","color","primary",2,"padding","1rem",3,"click"],["title","Credenciales incorrectas","icon","error",3,"swalFireOnInit","didClose",4,"ngIf"],["title","Credenciales incorrectas","icon","error",3,"swalFireOnInit","didClose"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Email "),e.qZA(),e._UZ(5,"input",2),e.YNc(6,_,2,0,"mat-error",3),e.qZA(),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Escribe tu contrase\xf1a"),e.qZA(),e._UZ(10,"input",4),e.TgZ(11,"button",5),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(12,"mat-icon"),e._uU(13),e.qZA()(),e.YNc(14,x,2,0,"mat-error",3),e.qZA(),e.TgZ(15,"div",6)(16,"button",7),e.NdJ("click",function(){return o.login()}),e.TgZ(17,"mat-icon"),e._uU(18,"login"),e.qZA()()()(),e.YNc(19,b,1,1,"swal",8),e.qZA()),2&r&&(e.xp6(1),e.Q6J("formGroup",o.loginForm),e.xp6(5),e.Q6J("ngIf",o.campoIsInvalid("email")),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.campoIsInvalid("password")),e.xp6(5),e.Q6J("ngIf",o.isCredentialError))},dependencies:[d.O5,h.lW,h.RK,f.Hw,c.KE,c.hX,c.TO,c.R9,T.Nt,p.xw,p.SQ,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,v.q1],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),L=(()=>{class t{constructor(){}equalsFields(r,o){return console.log(`campo1:  ${r} --- campo2: ${o}`),s=>{const u=s.get(r)?.value,l=s.get(o)?.value;return u!==l?(s.get(o)?.setErrors({notEquals:!0}),{notEquals:!0}):(s.get(o)?.setErrors(null),null)}}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=a(1572);function U(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Por favor, el usuario debe tener m\xednimo 4 caracteres "),e.qZA())}function k(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Por favor, introduce una direcci\xf3n de correo electr\xf3nico v\xe1lida "),e.qZA())}function J(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Por favor, la contrase\xf1a debe tener m\xednimo 6 caracteres "),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Por favor, deben coincidir las contrase\xf1as "),e.qZA())}function q(t,i){1&t&&e._UZ(0,"mat-spinner")}function N(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"swal",11),e.NdJ("didClose",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.authRegisterResponse=!1)}),e.qZA()}if(2&t){const r=e.oxw();e.Q6J("title",r.authRegisterResponseMessage)("icon",r.authRegisterResponseIcon)("swalFireOnInit",!0)}}let E=(()=>{class t{constructor(r,o,s,u,l,B){this.matIconRegistry=r,this.fb=o,this.utilService=s,this.router=u,this.authService=l,this.domSanitizer=B,this.registerForm=this.fb.group({username:["",[n.kI.required,n.kI.minLength(4),n.kI.pattern(g.MP)],[]],email:["",[n.kI.required,n.kI.pattern(g.s9)],[]],password1:["",[n.kI.required,n.kI.minLength(6),n.kI.pattern(g.MP)],[]],password2:["",[n.kI.required,n.kI.minLength(6),n.kI.pattern(g.MP)],[]]},{validators:[this.utilService.equalsFields("password1","password2")]}),this.hide=!0,this.matcher=new C.n,this.authRegisterResponse=!1,this.authRegisterResponseMessage="",this.authRegisterResponseIcon="error",this.matIconRegistry.addSvgIcon("logo",this.domSanitizer.bypassSecurityTrustResourceUrl("https://raw.githubusercontent.com/fireflysemantics/logo/master/Google.svg"))}campoIsInvalid(r){return this.registerForm.get(r)?.errors}save(){if(this.registerForm.valid){const{username:r,password1:o,email:s}=this.registerForm.value;this.authService.register({username:r,password:o,email:s}).subscribe({next:l=>{this.authRegisterResponse=!0,l?(this.authRegisterResponseIcon="success",this.authRegisterResponseMessage="Cuenta creada correctamente",setTimeout(()=>{this.router.navigateByUrl("app/inicio").then()},3e3)):(this.authRegisterResponseIcon="error",this.authRegisterResponseMessage="Ya existe una cuenta con ese email")},error:l=>{this.authRegisterResponseMessage=l.toString(),console.log(l)}})}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.jv),e.Y36(n.qu),e.Y36(L),e.Y36(m.F0),e.Y36(R.e),e.Y36(y.H7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:34,vars:15,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","1rem",2,"margin-top","3rem"],["fxLayout","column wrap","fxLayoutGap","1.5rem",3,"formGroup","ngSubmit"],["matInput","","formControlName","username"],[4,"ngIf"],["matInput","","formControlName","email"],["matInput","","formControlName","password1",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password2",3,"type"],["fxLayout","column","fxLayoutGap","1rem"],["mat-button","","mat-raised-button","","color","primary",2,"padding","1rem"],[3,"title","icon","swalFireOnInit","didClose",4,"ngIf"],[3,"title","icon","swalFireOnInit","didClose"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return o.save()}),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Usuario "),e.qZA(),e._UZ(5,"input",2),e.YNc(6,U,2,0,"mat-error",3),e.qZA(),e.TgZ(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Email "),e.qZA(),e._UZ(10,"input",4),e.YNc(11,k,2,0,"mat-error",3),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Escribe tu contrase\xf1a"),e.qZA(),e._UZ(15,"input",5),e.TgZ(16,"button",6),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(17,"mat-icon"),e._uU(18),e.qZA()(),e.YNc(19,J,2,0,"mat-error",3),e.qZA(),e.TgZ(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Repite tu contrase\xf1a"),e.qZA(),e._UZ(23,"input",7),e.TgZ(24,"button",6),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(25,"mat-icon"),e._uU(26),e.qZA()(),e.YNc(27,S,2,0,"mat-error",3),e.qZA(),e.TgZ(28,"div",8)(29,"button",9)(30,"mat-icon"),e._uU(31,"login"),e.qZA()()()(),e.YNc(32,q,1,0,"mat-spinner",3),e.YNc(33,N,1,3,"swal",10),e.qZA()),2&r&&(e.xp6(1),e.Q6J("formGroup",o.registerForm),e.xp6(5),e.Q6J("ngIf",o.campoIsInvalid("username")),e.xp6(5),e.Q6J("ngIf",o.campoIsInvalid("email")),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.campoIsInvalid("password1")),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.campoIsInvalid("password2")),e.xp6(5),e.Q6J("ngIf",o.authRegisterResponse),e.xp6(1),e.Q6J("ngIf",o.authRegisterResponse))},dependencies:[d.O5,h.lW,h.RK,f.Hw,w.Ou,c.KE,c.hX,c.TO,c.R9,T.Nt,p.xw,p.SQ,p.Wh,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,v.q1]}),t})();var I=a(3848),M=a(6869);function O(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"a",5),e.NdJ("click",function(){const u=e.CHM(r).$implicit,l=e.oxw();return e.KtG(l.activeLink=u)}),e._uU(1),e.qZA()}if(2&t){const r=i.$implicit,o=e.oxw();e.s9C("routerLink",r.url),e.Q6J("active",o.activeLink===r),e.xp6(1),e.Oqu(r.text)}}const Q=[{path:"",component:(()=>{class t{constructor(r){this.router=r,this.links=[{text:"Iniciar sesi\xf3n",url:"./login"},{text:"Crear cuenta",url:"./register"}],this.activeLink=this.links[0]}ngOnInit(){"/register"===this.router.url&&(this.activeLink=this.links[1])}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(m.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-home"]],decls:8,vars:2,consts:[["fxLayout","column"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","50"],["mat-tab-nav-bar","",3,"tabPanel"],["routerLinkActive","active","mat-tab-link","",3,"routerLink","active","click",4,"ngFor","ngForOf"],["tabPanel",""],["routerLinkActive","active","mat-tab-link","",3,"routerLink","active","click"]],template:function(r,o){if(1&r&&(e.TgZ(0,"div",0),e._UZ(1,"app-logo"),e.TgZ(2,"div",1)(3,"nav",2),e.YNc(4,O,2,3,"a",3),e.qZA(),e.TgZ(5,"mat-tab-nav-panel",null,4),e._UZ(7,"router-outlet"),e.qZA()()()),2&r){const s=e.MAs(6);e.xp6(3),e.Q6J("tabPanel",s),e.xp6(1),e.Q6J("ngForOf",o.links)}},dependencies:[d.sg,m.lC,m.rH,m.Od,p.xw,p.Wh,p.yH,I.BU,I.sW,I.Nj,M.R]}),t})(),children:[{path:"login",component:F},{path:"register",component:E},{path:"**",redirectTo:"login"}]}];let H=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(Q),m.Bz]}),t})();var P=a(6667),G=a(4466);let z=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,H,P.q,n.UX,v.ii.forRoot({fireOnInit:!0}),G.m]}),t})()}}]);